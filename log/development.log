  [1m[35m (101.9ms)[0m  [1m[35mCREATE DATABASE "mediatrack_development" ENCODING = 'unicode' /*application='Mediatrack'*/[0m
Missing env vars: TMDB_API_KEY, STRIPE_SECRET_KEY
STRIPE_SECRET_KEY is not set; Stripe API calls will fail
Missing env vars: TMDB_API_KEY, STRIPE_SECRET_KEY
STRIPE_SECRET_KEY is not set; Stripe API calls will fail
Missing env vars: TMDB_API_KEY, STRIPE_SECRET_KEY
STRIPE_SECRET_KEY is not set; Stripe API calls will fail
Missing env vars: TMDB_API_KEY, STRIPE_SECRET_KEY
STRIPE_SECRET_KEY is not set; Stripe API calls will fail
Missing env vars: TMDB_API_KEY, STRIPE_SECRET_KEY
STRIPE_SECRET_KEY is not set; Stripe API calls will fail
  [1m[35m (101.5ms)[0m  [1m[35mCREATE DATABASE "mediatrack_development" ENCODING = 'unicode' /*application='Mediatrack'*/[0m
Missing env vars: TMDB_API_KEY, STRIPE_SECRET_KEY
STRIPE_SECRET_KEY is not set; Stripe API calls will fail
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='Mediatrack'*/[0m
  [1m[35m (62.1ms)[0m  [1m[35mCREATE DATABASE "mediatrack_development" ENCODING = 'unicode' /*application='Mediatrack'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='Mediatrack'*/[0m
  [1m[35m (42.0ms)[0m  [1m[35mCREATE DATABASE "mediatrack_test" ENCODING = 'unicode' /*application='Mediatrack'*/[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='Mediatrack'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='Mediatrack'*/[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3376256833918853745) /*application='Mediatrack'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Mediatrack'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Mediatrack'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2025-10-22 18:09:58.629109', '2025-10-22 18:09:58.629112') RETURNING "key" /*application='Mediatrack'*/[0m
Migrating to DeviseCreateUsers (20251022114638)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Mediatrack'*/[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='Mediatrack'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email") /*application='Mediatrack'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token") /*application='Mediatrack'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251022114638') RETURNING "version" /*application='Mediatrack'*/[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT /*application='Mediatrack'*/[0m
Migrating to AddStripeToUsers (20251022114658)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Mediatrack'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "users" ADD "stripe_customer_id" character varying /*application='Mediatrack'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ADD "subscription_status" character varying /*application='Mediatrack'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251022114658') RETURNING "version" /*application='Mediatrack'*/[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT /*application='Mediatrack'*/[0m
Migrating to CreateMediaItems (20251022114716)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN /*application='Mediatrack'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "media_items" ("id" bigserial primary key, "tmdb_id" integer, "title" character varying, "media_type" character varying, "overview" text, "poster_path" character varying, "release_date" date, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='Mediatrack'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_media_items_on_tmdb_id" ON "media_items" ("tmdb_id") /*application='Mediatrack'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251022114716') RETURNING "version" /*application='Mediatrack'*/[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT /*application='Mediatrack'*/[0m
Migrating to CreateWatchlistItems (20251022114725)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Mediatrack'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "watchlist_items" ("id" bigserial primary key, "user_id" bigint NOT NULL, "media_item_id" bigint NOT NULL, "status" character varying DEFAULT 'planned' NOT NULL, "watched_on" date, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_077cf8f283"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_dbd68e62e5"
FOREIGN KEY ("media_item_id")
  REFERENCES "media_items" ("id")
) /*application='Mediatrack'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_watchlist_items_on_user_id" ON "watchlist_items" ("user_id") /*application='Mediatrack'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_watchlist_items_on_media_item_id" ON "watchlist_items" ("media_item_id") /*application='Mediatrack'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_watchlist_items_on_user_id_and_media_item_id" ON "watchlist_items" ("user_id", "media_item_id") /*application='Mediatrack'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251022114725') RETURNING "version" /*application='Mediatrack'*/[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT /*application='Mediatrack'*/[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3376256833918853745) /*application='Mediatrack'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Mediatrack'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='Mediatrack'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO "$user", public /*application='Mediatrack'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='Mediatrack'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO "$user", public /*application='Mediatrack'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Mediatrack'*/[0m
DEPRECATION WARNING: resource received a hash argument only. Please use a keyword instead. Support to hash argument will be removed in Rails 8.2. (called from block in <main> at /home/hanzo/documents/git/mediatrack/config/routes.rb:2)
DEPRECATION WARNING: resource received a hash argument path. Please use a keyword instead. Support to hash argument will be removed in Rails 8.2. (called from block in <main> at /home/hanzo/documents/git/mediatrack/config/routes.rb:2)
DEPRECATION WARNING: resource received a hash argument path_names. Please use a keyword instead. Support to hash argument will be removed in Rails 8.2. (called from block in <main> at /home/hanzo/documents/git/mediatrack/config/routes.rb:2)
DEPRECATION WARNING: resource received a hash argument controller. Please use a keyword instead. Support to hash argument will be removed in Rails 8.2. (called from block in <main> at /home/hanzo/documents/git/mediatrack/config/routes.rb:2)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = 'demo@example.com' LIMIT 1 /*application='Mediatrack'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Mediatrack'*/[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'demo@example.com' LIMIT 1 /*application='Mediatrack'*/[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "stripe_customer_id", "subscription_status") VALUES ('demo@example.com', '$2a$12$LJEKhq98Z8E8nQcx.fg53.G03OiXCCcERSlWcaGe6UOnnyKXwOTjm', NULL, NULL, NULL, '2025-10-22 18:09:59.025010', '2025-10-22 18:09:59.025010', NULL, NULL) RETURNING "id" /*application='Mediatrack'*/[0m
  [1m[36mTRANSACTION (14.5ms)[0m  [1m[35mCOMMIT /*application='Mediatrack'*/[0m
  [1m[36mMediaItem Load (0.2ms)[0m  [1m[34mSELECT "media_items".* FROM "media_items" WHERE "media_items"."tmdb_id" = 603 LIMIT 1 /*application='Mediatrack'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Mediatrack'*/[0m
  [1m[36mMediaItem Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "media_items" WHERE "media_items"."tmdb_id" = 603 LIMIT 1 /*application='Mediatrack'*/[0m
  [1m[36mMediaItem Create (0.3ms)[0m  [1m[32mINSERT INTO "media_items" ("tmdb_id", "title", "media_type", "overview", "poster_path", "release_date", "created_at", "updated_at") VALUES (603, 'the matrix', 'movie', NULL, '/f89U3ADr1oiB1s9GkdPOEpXUk5H.jpg', '1999-03-31', '2025-10-22 18:09:59.053863', '2025-10-22 18:09:59.053863') RETURNING "id" /*application='Mediatrack'*/[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT /*application='Mediatrack'*/[0m
  [1m[36mWatchlistItem Load (0.4ms)[0m  [1m[34mSELECT "watchlist_items".* FROM "watchlist_items" WHERE "watchlist_items"."user_id" = 1 AND "watchlist_items"."media_item_id" = 1 LIMIT 1 /*application='Mediatrack'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN /*application='Mediatrack'*/[0m
  [1m[36mWatchlistItem Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "watchlist_items" WHERE "watchlist_items"."media_item_id" = 1 AND "watchlist_items"."user_id" = 1 LIMIT 1 /*application='Mediatrack'*/[0m
  [1m[36mWatchlistItem Create (0.6ms)[0m  [1m[32mINSERT INTO "watchlist_items" ("user_id", "media_item_id", "status", "watched_on", "created_at", "updated_at") VALUES (1, 1, 'watched', '2025-09-25', '2025-10-22 18:09:59.072912', '2025-10-22 18:09:59.072912') RETURNING "id" /*application='Mediatrack'*/[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT /*application='Mediatrack'*/[0m
  [1m[36mMediaItem Load (0.1ms)[0m  [1m[34mSELECT "media_items".* FROM "media_items" WHERE "media_items"."tmdb_id" = 1399 LIMIT 1 /*application='Mediatrack'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Mediatrack'*/[0m
  [1m[36mMediaItem Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "media_items" WHERE "media_items"."tmdb_id" = 1399 LIMIT 1 /*application='Mediatrack'*/[0m
  [1m[36mMediaItem Create (0.1ms)[0m  [1m[32mINSERT INTO "media_items" ("tmdb_id", "title", "media_type", "overview", "poster_path", "release_date", "created_at", "updated_at") VALUES (1399, 'game of thrones', 'tv', NULL, '/u3bZgnGQ9T01sWNhyveQz0wH0Hl.jpg', '2011-04-17', '2025-10-22 18:09:59.079891', '2025-10-22 18:09:59.079891') RETURNING "id" /*application='Mediatrack'*/[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT /*application='Mediatrack'*/[0m
  [1m[36mWatchlistItem Load (0.1ms)[0m  [1m[34mSELECT "watchlist_items".* FROM "watchlist_items" WHERE "watchlist_items"."user_id" = 1 AND "watchlist_items"."media_item_id" = 2 LIMIT 1 /*application='Mediatrack'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Mediatrack'*/[0m
  [1m[36mWatchlistItem Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "watchlist_items" WHERE "watchlist_items"."media_item_id" = 2 AND "watchlist_items"."user_id" = 1 LIMIT 1 /*application='Mediatrack'*/[0m
  [1m[36mWatchlistItem Create (0.2ms)[0m  [1m[32mINSERT INTO "watchlist_items" ("user_id", "media_item_id", "status", "watched_on", "created_at", "updated_at") VALUES (1, 2, 'planned', NULL, '2025-10-22 18:09:59.086517', '2025-10-22 18:09:59.086517') RETURNING "id" /*application='Mediatrack'*/[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT /*application='Mediatrack'*/[0m
  [1m[36mMediaItem Load (0.1ms)[0m  [1m[34mSELECT "media_items".* FROM "media_items" WHERE "media_items"."tmdb_id" = 5114 LIMIT 1 /*application='Mediatrack'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Mediatrack'*/[0m
  [1m[36mMediaItem Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "media_items" WHERE "media_items"."tmdb_id" = 5114 LIMIT 1 /*application='Mediatrack'*/[0m
  [1m[36mMediaItem Create (0.2ms)[0m  [1m[32mINSERT INTO "media_items" ("tmdb_id", "title", "media_type", "overview", "poster_path", "release_date", "created_at", "updated_at") VALUES (5114, 'fullmetal alchemist: brotherhood', 'tv', NULL, '/5ZFUEOULaVml7pquY4M6cJrz4J9.jpg', '2009-04-05', '2025-10-22 18:09:59.092990', '2025-10-22 18:09:59.092990') RETURNING "id" /*application='Mediatrack'*/[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT /*application='Mediatrack'*/[0m
  [1m[36mWatchlistItem Load (0.6ms)[0m  [1m[34mSELECT "watchlist_items".* FROM "watchlist_items" WHERE "watchlist_items"."user_id" = 1 AND "watchlist_items"."media_item_id" = 3 LIMIT 1 /*application='Mediatrack'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Mediatrack'*/[0m
  [1m[36mWatchlistItem Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "watchlist_items" WHERE "watchlist_items"."media_item_id" = 3 AND "watchlist_items"."user_id" = 1 LIMIT 1 /*application='Mediatrack'*/[0m
  [1m[36mWatchlistItem Create (0.3ms)[0m  [1m[32mINSERT INTO "watchlist_items" ("user_id", "media_item_id", "status", "watched_on", "created_at", "updated_at") VALUES (1, 3, 'watched', '2025-10-07', '2025-10-22 18:09:59.101672', '2025-10-22 18:09:59.101672') RETURNING "id" /*application='Mediatrack'*/[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT /*application='Mediatrack'*/[0m
